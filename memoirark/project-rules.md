# MemoirArk — Project Rules & Architecture

## Golden Rule: Determinism
- MemoirArk never guesses, infers, or fabricates factual data.
- Missing dates/locations/relationships remain blank until the user enters them.
- No AI summarization or interpretation unless explicitly requested for specific fields.

## Purpose
- MemoirArk is a personal memoir and life archive engine.
- Primary user: Terry Holliday.
- Current scope: Single-user, local-first archival app.

## Future Commercialization
- MemoirArk may later become a commercial app.
- Architecture should remain modular and clean to support that possibility.
- No multi-tenant logic implemented yet.

## Relationship to Proveniq
- MemoirArk is not part of the Proveniq product family.
- It may optionally interoperate in the future with:
  - Proveniq Core
  - Ledger by Proveniq
- Phase 1 explicitly forbids any live integration.

## Tech Stack
- Backend: Node.js + Express + TypeScript
- Database: SQLite via Prisma
- Frontend: React (Vite) + TypeScript
- Styling: Tailwind CSS + shadcn/ui
- Data fetching: React Query
- Theme: System preference (light/dark) with override
- Typography:
  - Inter for UI
  - Source Serif Pro for narrative text

## Data Model
- Chapter
- Person
- Song
- TraumaCycle
- Event
- Artifact
- Synchronicity
- See `schema.prisma` for exact fields.

## Phase Rules
- Current phase: Phase 1 — Foundation & Seeding.
- Do not implement Phase 2+ features until explicitly instructed.
- Phase 1 deliverables:
  - Monorepo scaffolding
  - Prisma schema + migration
  - Seed data for Chapters, TraumaCycles, Songs
  - Basic Event CRUD API
  - Dashboard & Event UI

## Architectural Decisions

### Epilogue Representation
- The Epilogue chapter ("After the Smoke Clears") is stored as Chapter number 14.
- This keeps the numbering sequential and simple for queries.

### Delete Strategy
- Event deletions are **hard deletes** in Phase 1 for simplicity.
- Soft deletes may be introduced in a future phase if audit trails are needed.

### ID Generation
- All models use Prisma's `cuid()` for ID generation.
- This provides URL-safe, collision-resistant unique identifiers.

### Many-to-Many Relations
- Prisma implicit many-to-many relations are used where appropriate.
- Join tables are auto-generated by Prisma.
